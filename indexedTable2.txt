IndexedTable<E extends Object|Array>

struct:
  id: NodeId uint = 0
  
  nodes: {[NodeId]: Node {
    id: NodeId
    value: E
    prev?: Node
    next?: Node
  }}
  size: uint = 0
  head: DummyNode {next: Node = tail}
  tail: DummyNode {prev: Node = head}
  cachedArray?: Node[] = null

  indexes: {[indexName: IndexName str]: {[key]: str}: NodeMap {[NodeId]: Node}}

  config: {
    indexes: {[IndexName]: (str|number)[]}
  }

trait:
  constuctor(#config)
  $deepCopy(obj: T): T
  $unmodifiableNode(node): Node

  append(prevNode, value): Node
  insert(nextNode, value): Node
  remove(node)
  update(node, value)
  swap(node1, node2)
  getIndexedNode(indexName, value): Node
  listIndexedNodes(indexName, value): Node[]
  getNode(nodeId): Node
  headNode()
  tailNode()
  clear()
  size()
  isEmpty()
  forEach(fn: (Node, this) => bool, thisArg?)
  toArray(): Node[]
  #nextId()

  addIndex(indexName, columns): this
  removeIndex(indexName): this
  #getIndex(indexName, value): NodeMap
  #setIndex(indexName, node)
  #removeIndex(indexName, node)
  #setIndexes(node)
  #removeIndexes(node)

// # private -> internal_
// $ static
// _ member field
